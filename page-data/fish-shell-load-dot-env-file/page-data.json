{"componentChunkName":"component---src-templates-blog-post-js","path":"/fish-shell-load-dot-env-file/","result":{"data":{"site":{"siteMetadata":{"title":"p3t.lu"}},"markdownRemark":{"id":"7342316d-8bb1-5c2a-abf4-c60dbe504970","excerpt":"之前因為懶都直接切 zsh 讓 zsh 幫我載入 .env 檔，因為主要還是用 fish 開發，為了方便所以上網找了一下… 然後看到這篇「Fish shell - Load environment variables from file」，作者是自己寫了一個 function 來幫忙，如下：","html":"<p>之前因為懶都直接切 zsh 讓 zsh 幫我載入 .env 檔，因為主要還是用 fish 開發，為了方便所以上網找了一下…</p>\n<p>然後看到這篇<a href=\"https://lewandowski.io/2016/10/fish-env/\">「Fish shell - Load environment variables from file」</a>，作者是自己寫了一個 function 來幫忙，如下：</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ <span class=\"token function\">cat</span> ~/.config/fish/functions/posix-source.fish                      \n<span class=\"token keyword\">function</span> posix-source\n\t<span class=\"token keyword\">for</span> <span class=\"token for-or-select variable\">i</span> <span class=\"token keyword\">in</span> <span class=\"token punctuation\">(</span>cat <span class=\"token variable\">$argv</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token builtin class-name\">set</span> arr <span class=\"token punctuation\">(</span>echo <span class=\"token variable\">$i</span> <span class=\"token operator\">|</span><span class=\"token function\">tr</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">\\</span>n<span class=\"token punctuation\">)</span>\n  \t\t<span class=\"token builtin class-name\">set</span> <span class=\"token parameter variable\">-gx</span> <span class=\"token variable\">$arr</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token variable\">$arr</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span>\n\tend\nend\n\n$ posix-source web.env</code></pre></div>\n<br/>\n看了一下該文底下網友留言蠻熱烈也提供了一些改良的方法，於是我就依我本人的使用習慣稍微從中選擇了一個適手的版本：\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ <span class=\"token function\">cat</span> ~/.config/fish/functions/posix-source.fish\n<span class=\"token keyword\">function</span> posix-source\n    <span class=\"token keyword\">for</span> <span class=\"token for-or-select variable\">i</span> <span class=\"token keyword\">in</span> <span class=\"token punctuation\">(</span>cat <span class=\"token variable\">$argv</span> <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> <span class=\"token parameter variable\">-e</span> <span class=\"token string\">'[^[:space:]]'</span> <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> <span class=\"token parameter variable\">-v</span> <span class=\"token string\">'^#'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token builtin class-name\">set</span> arr <span class=\"token punctuation\">(</span>echo <span class=\"token variable\">$i</span> <span class=\"token operator\">|</span><span class=\"token function\">tr</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">\\</span>n<span class=\"token punctuation\">)</span>\n        <span class=\"token builtin class-name\">set</span> <span class=\"token parameter variable\">-gx</span> <span class=\"token variable\">$arr</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token variable\">$arr</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span>\n    end\nend\n\n$ posix-source .env</code></pre></div>\n<br/>\n快樂使用中 :)","frontmatter":{"title":"fish shell 讀 .env 檔設成環境變數","date":"July 15, 2021","description":null}},"previous":{"fields":{"slug":"/gcp-committed-use-discounts/"},"frontmatter":{"title":"買了 GCP 的承諾使用折扣 (Committed Use Discounts)"}},"next":{"fields":{"slug":"/shell-welcome-message/"},"frontmatter":{"title":"Shell 的歡迎訊息(welcome message)"}}},"pageContext":{"id":"7342316d-8bb1-5c2a-abf4-c60dbe504970","previousPostId":"2d021a85-9eff-5605-91cc-efc0b0d16e24","nextPostId":"6a86e991-7f2c-5fbc-9dda-110243b66d2b"}},"staticQueryHashes":["3624854548","548598555"]}